<div class="container py-5 bg-dark rounded-4 shadow-lg">
  <h2 class="mb-4 fw-bold text-white border-bottom pb-3">All Loan Requests</h2>

  <div *ngIf="loading" class="mb-3 text-white">
    <div class="spinner-border text-info me-2" role="status"></div>Loading loans...
  </div>
  <div *ngIf="error" class="alert alert-danger shadow-sm">{{ error }}</div>

  <div *ngIf="!loading && loans.length === 0" class="alert alert-secondary shadow-sm">
    No loan requests found.
  </div>

  <div class="list-group mb-4">
    <button
      class="list-group-item list-group-item-action d-flex justify-content-between align-items-center shadow-sm rounded-3 mb-3"
      *ngFor="let loan of pagedLoans()"
      (click)="openLoanDetails(loan)"
      style="cursor: pointer;"
    >
      <div>
        <div class="fw-semibold fs-5 text-white">
          Loan #{{ loan.id }} — {{ loan.userName || 'N/A' }}
        </div>
        <div class="text-white fst-italic small">
          {{ loan.loanTypeName || 'N/A' }} • Amount: {{ loan.loanAmount | currency :('INR') }}
        </div>
      </div>

<span
  class="badge rounded-pill px-3 py-2"
  [ngClass]="{
    'bg-success': loan.isApproved && loan.isProcessed,
    'bg-danger': !loan.isApproved && loan.isProcessed,
    'bg-warning text-dark': !loan.isProcessed
  }"
>
  {{
    loan.isApproved && loan.isProcessed ? 'Approved' :
    !loan.isApproved && loan.isProcessed ? 'Rejected' :
    'Pending'
  }}
</span>

    </button>
  </div>

  <nav *ngIf="loans.length > pageSize" class="d-flex justify-content-center">
    <ul class="pagination pagination-lg shadow-sm">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="setPage(currentPage - 1)" aria-label="Previous">&laquo;</button>
      </li>
      <li
        class="page-item"
        *ngFor="let page of [].constructor(totalPages()); let i = index"
        [class.active]="currentPage === i + 1"
      >
        <button class="page-link" (click)="setPage(i + 1)">{{ i + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages()">
        <button class="page-link" (click)="setPage(currentPage + 1)" aria-label="Next">&raquo;</button>
      </li>
    </ul>
  </nav>
</div>
